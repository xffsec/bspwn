function ww() {
    # Declare options as a local array to avoid conflicts with outer scope
    local -a options

    # Check if any arguments were provided
    if [ $# -eq 0 ]; then
        echo "Usage: ww [whatweb options] <URLs>"
        return 1
    fi

    # Get the last argument (the target URL or IP)
    target="${@: -1}"

    # Validate that the target looks like a URL or IP
    if [[ ! "$target" =~ ^(https?://|[a-zA-Z0-9.-]+\.[a-zA-Z]+|[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+) ]]; then
        echo "Error: Last argument doesn't appear to be a valid target"
        echo "Usage: ww [whatweb options] <URLs>"
        return 1
    fi

    # Generate a clean filename from the target
    clean_name=$(echo "$target" | sed -E 's/https?:\/\///g' | sed -E 's/[:\/]/_/g' | sed -E 's/\./_/g')
    base_filename="${clean_name}"

    # Define output filenames for text, XML, and JSON
    txt_file="./${base_filename}.txt"
    xml_file="./${base_filename}.xml"
    json_file="./${base_filename}.json"

    # Gather all arguments except the last one (the target)
    if [ $# -gt 1 ]; then
        options=("${@:1:$#-1}")
    else
        options=()
    fi

    # Display scan details
    echo -e "[+]Scanning $target..."
    echo -e "[+]Options: ${options[*]}"
    echo -e "[+]Results will be saved to:"
    echo -e "
----------------------
    "
    echo -e "	Text:  $txt_file"
    echo -e "	XML:   $xml_file"
    echo -e "	JSON:  $json_file"
    echo -e "
----------------------

    "

    # Run whatweb with the specified options and output formats
    whatweb -v "${options[@]}" --log-xml="$xml_file" --log-json="$json_file" "$target" | tee "$txt_file"

    echo "Scan complete!"
}
